report_comment: >
  This report has been generated by the <a href="https://github.com/OlivierCoen/nf-chimera-detector/" target="_blank">nf-chimera-detector</a>
  analysis pipeline.

report_section_order:

  "nf-chimera-detector-methods-description":
    order: -1000
  software_versions:
    order: -1001
  "nf-chimera-detector-summary":
    order: -1002

export_plots: true

disable_version_detection: true

run_modules:
  - custom_content


table_cond_formatting_colours:
  - inverted: "#3665D1"
  - not_inverted: "#E0A01F"

custom_data:

  chimeras:
    section_name: "Chimeras"
    file_format: "csv"
    sort_rows: false
    description: |
      Found chimeras
    plot_type: "table"
    headers:
      family:
        title: "Family"
        description: Family corresponding to the read
      species.taxid:
        title: "Species taxon ID"
        description: Taxon ID of the species corresponding to the read
      srr:
        title: "SRR"
        description: SRR accession corresponding to the read
      readName:
        title: "Read name"
        description: Read ID in the original Fastq file
      subject:
        title: "Target sequence"
        description: Name of the sequence that matched with this read in the target database
      identity:
        title: "% identity"
        description: Percentage of identity
        format: "{:,.1f}"
      alength:
        title: "Alignment length"
      mismatch:
        title: "# mismatches"
      indel:
        title: "# indels"
      qStart:
        title: "Start on read"
      qEnd:
        title: "End on read"
      sStart:
        title: "Start on target sequence"
      sEnd:
        title: "End on target sequence"
      score:
        title: "Alignment score"
      readLength:
        title: "Read length"
      Sp:
        title: "Sp"
      subject.s:
        title: "subject.s"
      identity.s:
        title: "identity.s"
      alength.s:
        title: "alength.s"
      mismatch.s:
        title: "mismatch.s"
      indel.s:
        title: "indel.s"
      qStart.s:
        title: "qStart.s"
      qEnd.s:
        title: "qEnd.s"
      sStart.s:
        title: "sStart.s"
      sEnd.s:
        title: "sEnd.s"
      score.s:
        title: "score.s"
      readLength.s:
        title: "readLength.s"
      Sp.s:
        title: "Sp.s"
      overlap:
        title: "Overlap"
      chimType:
        title: "Chimera type"
        description: "Column showing the two species involved in the chimeras"
      PCRdup:
        title: "PCR duplicate"
        description: "Column showing which chimeric reads may be PCR duplicates,i.e. which chimeric reads have identical alignement coordinates on both genomes"
      chimericPoint:
        title: "Chimeric point"
        description: "Column containing coordinate of the recombination point in one genome"
      insertionCoord:
        title: "Insertion coordinate"
        description: "Column containing coordinate of the recombination point in the other genome"
      inv:
        title: "Inverted"
        description: "Column showing the respective orientation (same or opposite) of the sequences involved in intra - genome chimeras"
        cond_formatting_rules:
          inverted:
            - s_eq: "TRUE"
          not_inverted:
            - s_eq: "FALSE"

  stat_chimeras_per_family:
    section_name: "Average chimera statistics per family"
    file_format: "csv"
    sort_rows: false
    description: |
      Table representing mean values among all chimeras found in each family.
    plot_type: "table"
    headers:
      family:
        title: "Family"
        description: Family corresponding to the read
      identity:
        title: "% identity"
        description: Percentage of identity
        format: "{:,.1f}"
      alength:
        title: "Alignment length"
      mismatch:
        title: "# mismatches"
      indel:
        title: "# indels"
      score:
        title: "Alignment score"
      readLength:
        title: "Read length"
      identity.s:
        title: "identity.s"
      alength.s:
        title: "alength.s"
      mismatch.s:
        title: "mismatch.s"
      indel.s:
        title: "indel.s"
      score.s:
        title: "score.s"
      readLength.s:
        title: "readLength.s"
      overlap:
        title: "Overlap"
      inv:
        title: "% inverted"
        description: "Percentage of chimeras showing respective orientation (same or opposite) of the sequences involved in intra - genome chimeras"

  stat_chimeras_per_species:
    section_name: "Average chimera statistics per species"
    file_format: "csv"
    sort_rows: false
    description: |
      Table representing mean values among all chimeras found in each species.
    plot_type: "table"
    headers:
      species.taxid:
        title: "Species taxon ID"
        description: Taxon ID of the species corresponding to the read
      identity:
        title: "% identity"
        description: Percentage of identity
        format: "{:,.1f}"
      alength:
        title: "Alignment length"
      mismatch:
        title: "# mismatches"
      indel:
        title: "# indels"
      score:
        title: "Alignment score"
      readLength:
        title: "Read length"
      identity.s:
        title: "identity.s"
      alength.s:
        title: "alength.s"
      mismatch.s:
        title: "mismatch.s"
      indel.s:
        title: "indel.s"
      score.s:
        title: "score.s"
      readLength.s:
        title: "readLength.s"
      overlap:
        title: "Overlap"
      inv:
        title: "% inverted"
        description: "Percentage of chimeras showing respective orientation (same or opposite) of the sequences involved in intra - genome chimeras"


  nb_chimeras:
    section_name: "Number of chimeras per family"
    file_format: "tsv"
    pconfig:
      ylab: family
      sort_samples: true
    description: |
      Distribution of number chimeras per family
    plot_type: "boxplot"

  nb_hits_target:
    section_name: "Number of hits against target database per family"
    file_format: "tsv"
    pconfig:
      ylab: family
      sort_samples: true
    description: |
      Distribution of number of Blast hits against target database per family
    plot_type: "boxplot"

  nb_hits_genomes:
    section_name: "Number of hits against genomes database per family"
    file_format: "tsv"
    pconfig:
      sort_samples: true
    description: |
      Distribution of number of Blast hits against genome per family
    plot_type: "boxplot"

  downloaded_genome_size:
    section_name: "Size of downloaded genomes"
    file_format: "tsv"
    pconfig:
      sort_samples: true
    description: |
      Size distribution of the downloaded genomes per family
    plot_type: "boxplot"

  assembled_genome_size:
    section_name: "Size of assembled genomes"
    file_format: "tsv"
    pconfig:
      sort_samples: true
    description: |
      Size distribution of the assembled genomes per family
    plot_type: "boxplot"

  fastq_size:
    section_name: "Size of downloaded fastq files"
    file_format: "tsv"
    pconfig:
      sort_samples: true
    description: |
      Size distribution of the fastq files per family
    plot_type: "boxplot"



sp:
  chimeras:
    fn: "*_chimeras.csv"
  stat_chimeras_per_family:
    fn: "*family_chimeras_summary.csv"
  stat_chimeras_per_species:
    fn: "*species_chimeras_summary.csv"
  nb_chimeras:
    fn: "*nb_chimeras_transposed.tsv"
  nb_hits_target:
    fn: "*blast_hits_against_target_transposed.tsv"
  nb_hits_genomes:
    fn: "*blast_hits_against_genomes_transposed.tsv"
  downloaded_genome_size:
    fn: "*downloaded_genome_size_transposed.tsv"
  assembled_genome_size:
    fn: "*assembled_genome_size_transposed.tsv"
  fastq_size:
    fn: "*fastq_size_transposed.tsv"
